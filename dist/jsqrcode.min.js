!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){this.expTable=new Array(256),this.logTable=new Array(256);for(var t=1,n=0;n<256;n++)this.expTable[n]=t,(t<<=1)>=256&&(t^=e);for(n=0;n<255;n++)this.logTable[this.expTable[n]]=n;var r=new Array(1);r[0]=0,this.zero=new i(this,new Array(r));var o=new Array(1);o[0]=1,this.one=new i(this,new Array(o)),this.__defineGetter__("Zero",function(){return this.zero}),this.__defineGetter__("One",function(){return this.one}),this.buildMonomial=function(e,t){if(e<0)throw"System.ArgumentException";if(0==t)return this.zero;for(var n=new Array(e+1),r=0;r<n.length;r++)n[r]=0;return n[0]=t,new i(this,n)},this.exp=function(e){return this.expTable[e]},this.log=function(e){if(0==e)throw"System.ArgumentException";return this.logTable[e]},this.inverse=function(e){if(0==e)throw"System.ArithmeticException";return this.expTable[255-this.logTable[e]]},this.multiply=function(e,t){return 0==e||0==t?0:1==e?t:1==t?e:this.expTable[(this.logTable[e]+this.logTable[t])%255]}}function i(e,t){if(null==t||0==t.length)throw"System.ArgumentException";this.field=e;var n=t.length;if(n>1&&0==t[0]){for(var o=1;o<n&&0==t[o];)o++;if(o==n)this.coefficients=e.Zero.coefficients;else{this.coefficients=new Array(n-o);for(var a=0;a<this.coefficients.length;a++)this.coefficients[a]=0;for(var s=0;s<this.coefficients.length;s++)this.coefficients[s]=t[o+s]}}else this.coefficients=t;this.__defineGetter__("Zero",function(){return 0==this.coefficients[0]}),this.__defineGetter__("Degree",function(){return this.coefficients.length-1}),this.__defineGetter__("Coefficients",function(){return this.coefficients}),this.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},this.evaluateAt=function(e){if(0==e)return this.getCoefficient(0);var t=this.coefficients.length;if(1==e){for(var n=0,i=0;i<t;i++)n=r.addOrSubtract(n,this.coefficients[i]);return n}var o=this.coefficients[0];for(i=1;i<t;i++)o=r.addOrSubtract(this.field.multiply(e,o),this.coefficients[i]);return o},this.addOrSubtract=function(t){if(this.field!=t.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return t;if(t.Zero)return this;var n=this.coefficients,o=t.coefficients;if(n.length>o.length){var a=n;n=o,o=a}for(var s=new Array(o.length),h=o.length-n.length,w=0;w<h;w++)s[w]=o[w];for(var f=h;f<o.length;f++)s[f]=r.addOrSubtract(n[f-h],o[f]);return new i(e,s)},this.multiply1=function(e){if(this.field!=e.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||e.Zero)return this.field.Zero;for(var t=this.coefficients,n=t.length,o=e.coefficients,a=o.length,s=new Array(n+a-1),h=0;h<n;h++)for(var w=t[h],f=0;f<a;f++)s[h+f]=r.addOrSubtract(s[h+f],this.field.multiply(w,o[f]));return new i(this.field,s)},this.multiply2=function(e){if(0==e)return this.field.Zero;if(1==e)return this;for(var t=this.coefficients.length,n=new Array(t),r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new i(this.field,n)},this.multiplyByMonomial=function(e,t){if(e<0)throw"System.ArgumentException";if(0==t)return this.field.Zero;for(var n=this.coefficients.length,r=new Array(n+e),o=0;o<r.length;o++)r[o]=0;for(o=0;o<n;o++)r[o]=this.field.multiply(this.coefficients[o],t);return new i(this.field,r)},this.divide=function(e){if(this.field!=e.field)throw"GF256Polys do not have same GF256 field";if(e.Zero)throw"Divide by 0";for(var t=this.field.Zero,n=this,r=e.getCoefficient(e.Degree),i=this.field.inverse(r);n.Degree>=e.Degree&&!n.Zero;){var o=n.Degree-e.Degree,a=this.field.multiply(n.getCoefficient(n.Degree),i),s=e.multiplyByMonomial(o,a),h=this.field.buildMonomial(o,a);t=t.addOrSubtract(h),n=n.addOrSubtract(s)}return new Array(t,n)}}function o(e,t){return e>=0?e>>t:(e>>t)+(2<<~t)}n.r(t),r.QR_CODE_FIELD=new r(285),r.DATA_MATRIX_FIELD=new r(301),r.addOrSubtract=function(e,t){return e^t};var a={};a.forReference=function(e){if(e<0||e>7)throw"System.ArgumentException";return a.DATA_MASKS[e]},a.DATA_MASKS=new Array(new function(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return 0==(e+t&1)}},new function(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return 0==(1&e)}},new function(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return t%3==0}},new function(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return(e+t)%3==0}},new function(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return 0==(o(e,1)+t/3&1)}},new function(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){var n=e*t;return(1&n)+n%3==0}},new function(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){var n=e*t;return 0==((1&n)+n%3&1)}},new function(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return 0==((e+t&1)+e*t%3&1)}});var s=a;function h(e,t,n){this.ordinal_Renamed_Field=e,this.bits=t,this.name=n,this.__defineGetter__("Bits",function(){return this.bits}),this.__defineGetter__("Name",function(){return this.name}),this.ordinal=function(){return this.ordinal_Renamed_Field}}h.forBits=function(e){if(e<0||e>=l.length)throw"ArgumentException";return l[e]};var w=new h(0,1,"L"),f=new h(1,0,"M"),u=new h(2,3,"Q"),d=new h(3,2,"H"),l=new Array(f,w,d,u),c=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),g=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);function v(e){this.errorCorrectionLevel=h.forBits(e>>3&3),this.dataMask=7&e,this.__defineGetter__("ErrorCorrectionLevel",function(){return this.errorCorrectionLevel}),this.__defineGetter__("DataMask",function(){return this.dataMask}),this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|this.dataMask},this.Equals=function(e){var t=e;return this.errorCorrectionLevel==t.errorCorrectionLevel&&this.dataMask==t.dataMask}}function m(e,t){if(t||(t=e),e<1||t<1)throw"Both dimensions must be greater than 0";this.width=e,this.height=t;var n=e>>5;0!=(31&e)&&n++,this.rowSize=n,this.bits=new Array(n*t);for(var r=0;r<this.bits.length;r++)this.bits[r]=0;this.__defineGetter__("Width",function(){return this.width}),this.__defineGetter__("Height",function(){return this.height}),this.__defineGetter__("Dimension",function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}),this.get_Renamed=function(e,t){var n=t*this.rowSize+(e>>5);return 0!=(1&o(this.bits[n],31&e))},this.set_Renamed=function(e,t){var n=t*this.rowSize+(e>>5);this.bits[n]|=1<<(31&e)},this.flip=function(e,t){var n=t*this.rowSize+(e>>5);this.bits[n]^=1<<(31&e)},this.clear=function(){for(var e=this.bits.length,t=0;t<e;t++)this.bits[t]=0},this.setRegion=function(e,t,n,r){if(t<0||e<0)throw"Left and top must be nonnegative";if(r<1||n<1)throw"Height and width must be at least 1";var i=e+n,o=t+r;if(o>this.height||i>this.width)throw"The region must fit inside the matrix";for(var a=t;a<o;a++)for(var s=a*this.rowSize,h=e;h<i;h++)this.bits[s+(h>>5)]|=1<<(31&h)}}function b(e,t){this.count=e,this.dataCodewords=t,this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("DataCodewords",function(){return this.dataCodewords})}function y(e,t,n){this.ecCodewordsPerBlock=e,this.ecBlocks=n?new Array(t,n):new Array(t),this.__defineGetter__("ECCodewordsPerBlock",function(){return this.ecCodewordsPerBlock}),this.__defineGetter__("TotalECCodewords",function(){return this.ecCodewordsPerBlock*this.NumBlocks}),this.__defineGetter__("NumBlocks",function(){for(var e=0,t=0;t<this.ecBlocks.length;t++)e+=this.ecBlocks[t].length;return e}),this.getECBlocks=function(){return this.ecBlocks}}function C(e,t,n,r,i,o){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=new Array(n,r,i,o);for(var a=0,s=n.ECCodewordsPerBlock,h=n.getECBlocks(),w=0;w<h.length;w++){var f=h[w];a+=f.Count*(f.DataCodewords+s)}this.totalCodewords=a,this.__defineGetter__("VersionNumber",function(){return this.versionNumber}),this.__defineGetter__("AlignmentPatternCenters",function(){return this.alignmentPatternCenters}),this.__defineGetter__("TotalCodewords",function(){return this.totalCodewords}),this.__defineGetter__("DimensionForVersion",function(){return 17+4*this.versionNumber}),this.buildFunctionPattern=function(){var e=this.DimensionForVersion,t=new m(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var i=this.alignmentPatternCenters[r]-2,o=0;o<n;o++)0==r&&(0==o||o==n-1)||r==n-1&&0==o||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},this.getECBlocksForLevel=function(e){return this.ecBlocks[e.ordinal()]}}function p(e,t){this.numDataCodewords=e,this.codewords=t,this.__defineGetter__("NumDataCodewords",function(){return this.numDataCodewords}),this.__defineGetter__("Codewords",function(){return this.codewords})}v.numBitsDiffering=function(e,t){return g[15&(e^=t)]+g[15&o(e,4)]+g[15&o(e,8)]+g[15&o(e,12)]+g[15&o(e,16)]+g[15&o(e,20)]+g[15&o(e,24)]+g[15&o(e,28)]},v.decodeFormatInformation=function(e){var t=v.doDecodeFormatInformation(e);return null!=t?t:v.doDecodeFormatInformation(21522^e)},v.doDecodeFormatInformation=function(e){for(var t=4294967295,n=0,r=0;r<c.length;r++){var i=c[r],o=i[0];if(o==e)return new v(i[1]);var a=this.numBitsDiffering(e,o);a<t&&(n=i[1],t=a)}return t<=3?new v(n):null},C.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),C.VERSIONS=new Array(new C(1,new Array,new y(7,new b(1,19)),new y(10,new b(1,16)),new y(13,new b(1,13)),new y(17,new b(1,9))),new C(2,new Array(6,18),new y(10,new b(1,34)),new y(16,new b(1,28)),new y(22,new b(1,22)),new y(28,new b(1,16))),new C(3,new Array(6,22),new y(15,new b(1,55)),new y(26,new b(1,44)),new y(18,new b(2,17)),new y(22,new b(2,13))),new C(4,new Array(6,26),new y(20,new b(1,80)),new y(18,new b(2,32)),new y(26,new b(2,24)),new y(16,new b(4,9))),new C(5,new Array(6,30),new y(26,new b(1,108)),new y(24,new b(2,43)),new y(18,new b(2,15),new b(2,16)),new y(22,new b(2,11),new b(2,12))),new C(6,new Array(6,34),new y(18,new b(2,68)),new y(16,new b(4,27)),new y(24,new b(4,19)),new y(28,new b(4,15))),new C(7,new Array(6,22,38),new y(20,new b(2,78)),new y(18,new b(4,31)),new y(18,new b(2,14),new b(4,15)),new y(26,new b(4,13),new b(1,14))),new C(8,new Array(6,24,42),new y(24,new b(2,97)),new y(22,new b(2,38),new b(2,39)),new y(22,new b(4,18),new b(2,19)),new y(26,new b(4,14),new b(2,15))),new C(9,new Array(6,26,46),new y(30,new b(2,116)),new y(22,new b(3,36),new b(2,37)),new y(20,new b(4,16),new b(4,17)),new y(24,new b(4,12),new b(4,13))),new C(10,new Array(6,28,50),new y(18,new b(2,68),new b(2,69)),new y(26,new b(4,43),new b(1,44)),new y(24,new b(6,19),new b(2,20)),new y(28,new b(6,15),new b(2,16))),new C(11,new Array(6,30,54),new y(20,new b(4,81)),new y(30,new b(1,50),new b(4,51)),new y(28,new b(4,22),new b(4,23)),new y(24,new b(3,12),new b(8,13))),new C(12,new Array(6,32,58),new y(24,new b(2,92),new b(2,93)),new y(22,new b(6,36),new b(2,37)),new y(26,new b(4,20),new b(6,21)),new y(28,new b(7,14),new b(4,15))),new C(13,new Array(6,34,62),new y(26,new b(4,107)),new y(22,new b(8,37),new b(1,38)),new y(24,new b(8,20),new b(4,21)),new y(22,new b(12,11),new b(4,12))),new C(14,new Array(6,26,46,66),new y(30,new b(3,115),new b(1,116)),new y(24,new b(4,40),new b(5,41)),new y(20,new b(11,16),new b(5,17)),new y(24,new b(11,12),new b(5,13))),new C(15,new Array(6,26,48,70),new y(22,new b(5,87),new b(1,88)),new y(24,new b(5,41),new b(5,42)),new y(30,new b(5,24),new b(7,25)),new y(24,new b(11,12),new b(7,13))),new C(16,new Array(6,26,50,74),new y(24,new b(5,98),new b(1,99)),new y(28,new b(7,45),new b(3,46)),new y(24,new b(15,19),new b(2,20)),new y(30,new b(3,15),new b(13,16))),new C(17,new Array(6,30,54,78),new y(28,new b(1,107),new b(5,108)),new y(28,new b(10,46),new b(1,47)),new y(28,new b(1,22),new b(15,23)),new y(28,new b(2,14),new b(17,15))),new C(18,new Array(6,30,56,82),new y(30,new b(5,120),new b(1,121)),new y(26,new b(9,43),new b(4,44)),new y(28,new b(17,22),new b(1,23)),new y(28,new b(2,14),new b(19,15))),new C(19,new Array(6,30,58,86),new y(28,new b(3,113),new b(4,114)),new y(26,new b(3,44),new b(11,45)),new y(26,new b(17,21),new b(4,22)),new y(26,new b(9,13),new b(16,14))),new C(20,new Array(6,34,62,90),new y(28,new b(3,107),new b(5,108)),new y(26,new b(3,41),new b(13,42)),new y(30,new b(15,24),new b(5,25)),new y(28,new b(15,15),new b(10,16))),new C(21,new Array(6,28,50,72,94),new y(28,new b(4,116),new b(4,117)),new y(26,new b(17,42)),new y(28,new b(17,22),new b(6,23)),new y(30,new b(19,16),new b(6,17))),new C(22,new Array(6,26,50,74,98),new y(28,new b(2,111),new b(7,112)),new y(28,new b(17,46)),new y(30,new b(7,24),new b(16,25)),new y(24,new b(34,13))),new C(23,new Array(6,30,54,74,102),new y(30,new b(4,121),new b(5,122)),new y(28,new b(4,47),new b(14,48)),new y(30,new b(11,24),new b(14,25)),new y(30,new b(16,15),new b(14,16))),new C(24,new Array(6,28,54,80,106),new y(30,new b(6,117),new b(4,118)),new y(28,new b(6,45),new b(14,46)),new y(30,new b(11,24),new b(16,25)),new y(30,new b(30,16),new b(2,17))),new C(25,new Array(6,32,58,84,110),new y(26,new b(8,106),new b(4,107)),new y(28,new b(8,47),new b(13,48)),new y(30,new b(7,24),new b(22,25)),new y(30,new b(22,15),new b(13,16))),new C(26,new Array(6,30,58,86,114),new y(28,new b(10,114),new b(2,115)),new y(28,new b(19,46),new b(4,47)),new y(28,new b(28,22),new b(6,23)),new y(30,new b(33,16),new b(4,17))),new C(27,new Array(6,34,62,90,118),new y(30,new b(8,122),new b(4,123)),new y(28,new b(22,45),new b(3,46)),new y(30,new b(8,23),new b(26,24)),new y(30,new b(12,15),new b(28,16))),new C(28,new Array(6,26,50,74,98,122),new y(30,new b(3,117),new b(10,118)),new y(28,new b(3,45),new b(23,46)),new y(30,new b(4,24),new b(31,25)),new y(30,new b(11,15),new b(31,16))),new C(29,new Array(6,30,54,78,102,126),new y(30,new b(7,116),new b(7,117)),new y(28,new b(21,45),new b(7,46)),new y(30,new b(1,23),new b(37,24)),new y(30,new b(19,15),new b(26,16))),new C(30,new Array(6,26,52,78,104,130),new y(30,new b(5,115),new b(10,116)),new y(28,new b(19,47),new b(10,48)),new y(30,new b(15,24),new b(25,25)),new y(30,new b(23,15),new b(25,16))),new C(31,new Array(6,30,56,82,108,134),new y(30,new b(13,115),new b(3,116)),new y(28,new b(2,46),new b(29,47)),new y(30,new b(42,24),new b(1,25)),new y(30,new b(23,15),new b(28,16))),new C(32,new Array(6,34,60,86,112,138),new y(30,new b(17,115)),new y(28,new b(10,46),new b(23,47)),new y(30,new b(10,24),new b(35,25)),new y(30,new b(19,15),new b(35,16))),new C(33,new Array(6,30,58,86,114,142),new y(30,new b(17,115),new b(1,116)),new y(28,new b(14,46),new b(21,47)),new y(30,new b(29,24),new b(19,25)),new y(30,new b(11,15),new b(46,16))),new C(34,new Array(6,34,62,90,118,146),new y(30,new b(13,115),new b(6,116)),new y(28,new b(14,46),new b(23,47)),new y(30,new b(44,24),new b(7,25)),new y(30,new b(59,16),new b(1,17))),new C(35,new Array(6,30,54,78,102,126,150),new y(30,new b(12,121),new b(7,122)),new y(28,new b(12,47),new b(26,48)),new y(30,new b(39,24),new b(14,25)),new y(30,new b(22,15),new b(41,16))),new C(36,new Array(6,24,50,76,102,128,154),new y(30,new b(6,121),new b(14,122)),new y(28,new b(6,47),new b(34,48)),new y(30,new b(46,24),new b(10,25)),new y(30,new b(2,15),new b(64,16))),new C(37,new Array(6,28,54,80,106,132,158),new y(30,new b(17,122),new b(4,123)),new y(28,new b(29,46),new b(14,47)),new y(30,new b(49,24),new b(10,25)),new y(30,new b(24,15),new b(46,16))),new C(38,new Array(6,32,58,84,110,136,162),new y(30,new b(4,122),new b(18,123)),new y(28,new b(13,46),new b(32,47)),new y(30,new b(48,24),new b(14,25)),new y(30,new b(42,15),new b(32,16))),new C(39,new Array(6,26,54,82,110,138,166),new y(30,new b(20,117),new b(4,118)),new y(28,new b(40,47),new b(7,48)),new y(30,new b(43,24),new b(22,25)),new y(30,new b(10,15),new b(67,16))),new C(40,new Array(6,30,58,86,114,142,170),new y(30,new b(19,118),new b(6,119)),new y(28,new b(18,47),new b(31,48)),new y(30,new b(34,24),new b(34,25)),new y(30,new b(20,15),new b(61,16)))),C.getVersionForNumber=function(e){if(e<1||e>40)throw"ArgumentException";return C.VERSIONS[e-1]},C.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw"Error getProvisionalVersionForDimension";try{return C.getVersionForNumber(e-17>>2)}catch(e){throw"Error getVersionForNumber"}},C.decodeVersionInformation=function(e){for(var t=4294967295,n=0,r=0;r<C.VERSION_DECODE_INFO.length;r++){var i=C.VERSION_DECODE_INFO[r];if(i==e)return this.getVersionForNumber(r+7);var o=v.numBitsDiffering(e,i);o<t&&(n=r+7,t=o)}return t<=3?this.getVersionForNumber(n):null},p.getDataBlocks=function(e,t,n){if(e.length!=t.TotalCodewords)throw"ArgumentException";for(var r=t.getECBlocksForLevel(n),i=0,o=r.getECBlocks(),a=0;a<o.length;a++)i+=o[a].Count;for(var s=new Array(i),h=0,w=0;w<o.length;w++){var f=o[w];for(a=0;a<f.Count;a++){var u=f.DataCodewords,d=r.ECCodewordsPerBlock+u;s[h++]=new p(u,new Array(d))}}for(var l=s[0].codewords.length,c=s.length-1;c>=0;){if(s[c].codewords.length==l)break;c--}c++;var g=l-r.ECCodewordsPerBlock,v=0;for(a=0;a<g;a++)for(w=0;w<h;w++)s[w].codewords[a]=e[v++];for(w=c;w<h;w++)s[w].codewords[g]=e[v++];var m=s[0].codewords.length;for(a=g;a<m;a++)for(w=0;w<h;w++){var b=w<c?a:a+1;s[w].codewords[b]=e[v++]}return s};var _={};_.rsDecoder=new function(e){this.field=e,this.decode=function(e,t){for(var n=new i(this.field,e),o=new Array(t),a=0;a<o.length;a++)o[a]=0;var s=!0;for(a=0;a<t;a++){var h=n.evaluateAt(this.field.exp(a));o[o.length-1-a]=h,0!=h&&(s=!1)}if(!s){var w=new i(this.field,o),f=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),w,t),u=f[0],d=f[1],l=this.findErrorLocations(u),c=this.findErrorMagnitudes(d,l,!1);for(a=0;a<l.length;a++){var g=e.length-1-this.field.log(l[a]);if(g<0)throw"ReedSolomonException Bad error location";e[g]=r.addOrSubtract(e[g],c[a])}}},this.runEuclideanAlgorithm=function(e,t,n){if(e.Degree<t.Degree){var r=e;e=t,t=r}for(var i=e,o=t,a=this.field.One,s=this.field.Zero,h=this.field.Zero,w=this.field.One;o.Degree>=Math.floor(n/2);){var f=i,u=a,d=h;if(a=s,h=w,(i=o).Zero)throw"r_{i-1} was zero";o=f;for(var l=this.field.Zero,c=i.getCoefficient(i.Degree),g=this.field.inverse(c);o.Degree>=i.Degree&&!o.Zero;){var v=o.Degree-i.Degree,m=this.field.multiply(o.getCoefficient(o.Degree),g);l=l.addOrSubtract(this.field.buildMonomial(v,m)),o=o.addOrSubtract(i.multiplyByMonomial(v,m))}s=l.multiply1(a).addOrSubtract(u),w=l.multiply1(h).addOrSubtract(d)}var b=w.getCoefficient(0);if(0==b)throw"ReedSolomonException sigmaTilde(0) was zero";var y=this.field.inverse(b),C=w.multiply2(y),p=o.multiply2(y);return new Array(C,p)},this.findErrorLocations=function(e){var t=e.Degree;if(1==t)return new Array(e.getCoefficient(1));for(var n=new Array(t),r=0,i=1;i<256&&r<t;i++)0==e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!=t)throw"Error locator degree does not match number of roots";return n},this.findErrorMagnitudes=function(e,t,n){for(var i=t.length,o=new Array(i),a=0;a<i;a++){for(var s=this.field.inverse(t[a]),h=1,w=0;w<i;w++)a!=w&&(h=this.field.multiply(h,r.addOrSubtract(1,this.field.multiply(t[w],s))));o[a]=this.field.multiply(e.evaluateAt(s),this.field.inverse(h)),n&&(o[a]=this.field.multiply(o[a],s))}return o}}(r.QR_CODE_FIELD),_.correctErrors=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=255&e[i];var o=e.length-t;try{_.rsDecoder.decode(r,o)}catch(e){throw e}for(i=0;i<t;i++)e[i]=r[i]},_.decode=function(e,t){for(var n=new function(e){var t=e.Dimension;if(t<21||1!=(3&t))throw"Error BitMatrixParser";this.bitMatrix=e,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(e,t,n){return this.bitMatrix.get_Renamed(e,t)?n<<1|1:n<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);if(this.parsedFormatInfo=v.decodeFormatInformation(e),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var r=this.bitMatrix.Dimension;e=0;var i=r-8;for(t=r-1;t>=i;t--)e=this.copyBit(t,8,e);for(n=r-7;n<r;n++)e=this.copyBit(8,n,e);if(this.parsedFormatInfo=v.decodeFormatInformation(e),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.Dimension,t=e-17>>2;if(t<=6)return C.getVersionForNumber(t);for(var n=0,r=e-11,i=5;i>=0;i--)for(var o=e-9;o>=r;o--)n=this.copyBit(o,i,n);if(this.parsedVersion=C.decodeVersionInformation(n),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==e)return this.parsedVersion;for(n=0,o=5;o>=0;o--)for(i=e-9;i>=r;i--)n=this.copyBit(o,i,n);if(this.parsedVersion=C.decodeVersionInformation(n),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==e)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=s.forReference(e.DataMask),r=this.bitMatrix.Dimension;n.unmaskBitMatrix(this.bitMatrix,r);for(var i=t.buildFunctionPattern(),o=!0,a=new Array(t.TotalCodewords),h=0,w=0,f=0,u=r-1;u>0;u-=2){6==u&&u--;for(var d=0;d<r;d++)for(var l=o?r-1-d:d,c=0;c<2;c++)i.get_Renamed(u-c,l)||(f++,w<<=1,this.bitMatrix.get_Renamed(u-c,l)&&(w|=1),8==f&&(a[h++]=w,f=0,w=0));o^=!0}if(h!=t.TotalCodewords)throw"Error readCodewords";return a}}(t),r=n.readVersion(),i=n.readFormatInformation().ErrorCorrectionLevel,o=n.readCodewords(),a=p.getDataBlocks(o,r,i),h=0,w=0;w<a.length;w++)h+=a[w].NumDataCodewords;for(var f=new Array(h),u=0,d=0;d<a.length;d++){var l=a[d],c=l.Codewords,g=l.NumDataCodewords;_.correctErrors(c,g);for(w=0;w<g;w++)f[u++]=c[w]}return new function(e,t,n,r){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=t,this.numErrorCorrectionCode=r,n<=9?this.dataLengthMode=0:n>=10&&n<=26?this.dataLengthMode=1:n>=27&&n<=40&&(this.dataLengthMode=2),this.getNextBits=function(e){var t=0;if(e<this.bitPointer+1){for(var n=0,r=0;r<e;r++)n+=1<<r;return n<<=this.bitPointer-e+1,t=(this.blocks[this.blockPointer]&n)>>this.bitPointer-e+1,this.bitPointer-=e,t}if(e<this.bitPointer+1+8){var i=0;for(r=0;r<this.bitPointer+1;r++)i+=1<<r;return t=(this.blocks[this.blockPointer]&i)<<e-(this.bitPointer+1),this.blockPointer++,t+=this.blocks[this.blockPointer]>>8-(e-(this.bitPointer+1)),this.bitPointer=this.bitPointer-e%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),t}if(e<this.bitPointer+1+16){i=0;var o=0;for(r=0;r<this.bitPointer+1;r++)i+=1<<r;var a=(this.blocks[this.blockPointer]&i)<<e-(this.bitPointer+1);this.blockPointer++;var s=this.blocks[this.blockPointer]<<e-(this.bitPointer+1+8);for(this.blockPointer++,r=0;r<e-(this.bitPointer+1+8);r++)o+=1<<r;return o<<=8-(e-(this.bitPointer+1+8)),t=a+s+((this.blocks[this.blockPointer]&o)>>8-(e-(this.bitPointer+1+8))),this.bitPointer=this.bitPointer-(e-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),t}return 0},this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(t){for(var n=0;t>>n!=1;)n++;return this.getNextBits(e.sizeOfDataLengthInfo[this.dataLengthMode][n])},this.getRomanAndFigureString=function(e){var t=e,n=0,r="",i=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do{if(t>1){var o=(n=this.getNextBits(11))%45;r+=i[Math.floor(n/45)],r+=i[o],t-=2}else 1==t&&(r+=i[n=this.getNextBits(6)],t-=1)}while(t>0);return r},this.getFigureString=function(e){var t=e,n=0,r="";do{t>=3?((n=this.getNextBits(10))<100&&(r+="0"),n<10&&(r+="0"),t-=3):2==t?((n=this.getNextBits(7))<10&&(r+="0"),t-=2):1==t&&(n=this.getNextBits(4),t-=1),r+=n}while(t>0);return r},this.get8bitByteArray=function(e){var t=e,n=0,r=new Array;do{n=this.getNextBits(8),r.push(n),t--}while(t>0);return r},this.getKanjiString=function(e){var t=e,n=0,r="";do{var i=((n=this.getNextBits(13))/192<<8)+n%192,o=0;o=i+33088<=40956?i+33088:i+49472,r+=String.fromCharCode(o),t--}while(t>0);return r},this.parseECIValue=function(){var e=0,t=this.getNextBits(8);return 0==(128&t)&&(e=127&t),128==(192&t)&&(e=(63&t)<<8|this.getNextBits(8)),192==(224&t)&&(e=(31&t)<<16|this.getNextBits(8)),e},this.__defineGetter__("DataByte",function(){for(var e=new Array;;){var t=this.NextMode();if(0==t){if(e.length>0)break;throw"Empty data block"}if(1!=t&&2!=t&&4!=t&&8!=t&&7!=t)throw"Invalid mode: "+t+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(7==t)var n=this.parseECIValue();else{var r=this.getDataLength(t);if(r<1)throw"Invalid data length: "+r;switch(t){case 1:for(var i=this.getFigureString(r),o=new Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);e.push(o);break;case 2:for(i=this.getRomanAndFigureString(r),o=new Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);e.push(o);break;case 4:n=this.get8bitByteArray(r),e.push(n);break;case 8:i=this.getKanjiString(r),e.push(i)}}}return e})}(e,f,r.VersionNumber,i.Bits)};var A=_;function M(e,t,n){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=n,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return Math.floor(this.x)}),this.__defineGetter__("Y",function(){return Math.floor(this.y)}),this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,n){if(Math.abs(t-this.y)<=e&&Math.abs(n-this.x)<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1}}var k=3,P=57,S=8,B=2;function N(e){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=new Array(0,0,0,0,0),this.resultPointCallback=null,this.__defineGetter__("CrossCheckStateCount",function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}),this.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0==r)return!1;t+=r}if(t<7)return!1;var i=Math.floor((t<<S)/7),o=Math.floor(i/2);return Math.abs(i-(e[0]<<S))<o&&Math.abs(i-(e[1]<<S))<o&&Math.abs(3*i-(e[2]<<S))<3*o&&Math.abs(i-(e[3]<<S))<o&&Math.abs(i-(e[4]<<S))<o},this.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},this.crossCheckVertical=function(t,n,r,i){for(var o=this.image,a=e.height,s=this.CrossCheckStateCount,h=t;h>=0&&o[n+h*e.width];)s[2]++,h--;if(h<0)return NaN;for(;h>=0&&!o[n+h*e.width]&&s[1]<=r;)s[1]++,h--;if(h<0||s[1]>r)return NaN;for(;h>=0&&o[n+h*e.width]&&s[0]<=r;)s[0]++,h--;if(s[0]>r)return NaN;for(h=t+1;h<a&&o[n+h*e.width];)s[2]++,h++;if(h==a)return NaN;for(;h<a&&!o[n+h*e.width]&&s[3]<r;)s[3]++,h++;if(h==a||s[3]>=r)return NaN;for(;h<a&&o[n+h*e.width]&&s[4]<r;)s[4]++,h++;if(s[4]>=r)return NaN;var w=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(w-i)>=2*i?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,h):NaN},this.crossCheckHorizontal=function(t,n,r,i){for(var o=this.image,a=e.width,s=this.CrossCheckStateCount,h=t;h>=0&&o[h+n*e.width];)s[2]++,h--;if(h<0)return NaN;for(;h>=0&&!o[h+n*e.width]&&s[1]<=r;)s[1]++,h--;if(h<0||s[1]>r)return NaN;for(;h>=0&&o[h+n*e.width]&&s[0]<=r;)s[0]++,h--;if(s[0]>r)return NaN;for(h=t+1;h<a&&o[h+n*e.width];)s[2]++,h++;if(h==a)return NaN;for(;h<a&&!o[h+n*e.width]&&s[3]<r;)s[3]++,h++;if(h==a||s[3]>=r)return NaN;for(;h<a&&o[h+n*e.width]&&s[4]<r;)s[4]++,h++;if(s[4]>=r)return NaN;var w=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(w-i)>=i?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,h):NaN},this.handlePossibleCenter=function(e,t,n){var r=e[0]+e[1]+e[2]+e[3]+e[4],i=this.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(i),e[2],r);if(!isNaN(o)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(o),e[2],r),!isNaN(i))){for(var a=r/7,s=!1,h=this.possibleCenters.length,w=0;w<h;w++){var f=this.possibleCenters[w];if(f.aboutEquals(a,o,i)){f.incrementCount(),s=!0;break}}if(!s){var u=new function(e,t,n){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=n,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return this.x}),this.__defineGetter__("Y",function(){return this.y}),this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,n){if(Math.abs(t-this.y)<=e&&Math.abs(n-this.x)<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1}}(i,o,a);this.possibleCenters.push(u),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(u)}return!0}return!1},this.selectBestPatterns=function(){var e=this.possibleCenters.length;if(e<3)throw"Couldn't find enough finder patterns (found "+e+")";if(e>3){for(var t=0,n=0,r=0;r<e;r++){var i=this.possibleCenters[r].EstimatedModuleSize;t+=i,n+=i*i}var o=t/e;this.possibleCenters.sort(function(e,t){var n=Math.abs(t.EstimatedModuleSize-o),r=Math.abs(e.EstimatedModuleSize-o);return n<r?-1:n==r?0:1});var a=Math.sqrt(n/e-o*o),s=Math.max(.2*o,a);for(r=this.possibleCenters.length-1;r>=0;r--){var h=this.possibleCenters[r];Math.abs(h.EstimatedModuleSize-o)>s&&this.possibleCenters.splice(r,1)}}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(e,t){return e.count>t.count?-1:e.count<t.count?1:0}),new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2])},this.findRowSkip=function(){var e=this.possibleCenters.length;if(e<=1)return 0;for(var t=null,n=0;n<e;n++){var r=this.possibleCenters[n];if(r.Count>=B){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.X-r.X)-Math.abs(t.Y-r.Y))/2);t=r}}return 0},this.haveMultiplyConfirmedCenters=function(){for(var e=0,t=0,n=this.possibleCenters.length,r=0;r<n;r++){var i=this.possibleCenters[r];i.Count>=B&&(e++,t+=i.EstimatedModuleSize)}if(e<3)return!1;var o=t/n,a=0;for(r=0;r<n;r++)i=this.possibleCenters[r],a+=Math.abs(i.EstimatedModuleSize-o);return a<=.05*t},this.findFinderPattern=function(t){this.image=t;var n=e.height,r=e.width,i=Math.floor(3*n/(4*P));i<k&&(i=k);for(var o=!1,a=new Array(5),s=i-1;s<n&&!o;s+=i){a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0;for(var h=0,w=0;w<r;w++)if(t[w+s*e.width])1==(1&h)&&h++,a[h]++;else if(0==(1&h))if(4==h)if(this.foundPatternCross(a)){if(this.handlePossibleCenter(a,s,w))if(i=2,this.hasSkipped)o=this.haveMultiplyConfirmedCenters();else{var f=this.findRowSkip();f>a[2]&&(s+=f-a[2]-i,w=r-1)}else{do{w++}while(w<r&&!t[w+s*e.width]);w--}h=0,a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0}else a[0]=a[2],a[1]=a[3],a[2]=a[4],a[3]=1,a[4]=0,h=3;else a[++h]++;else a[h]++;if(this.foundPatternCross(a))this.handlePossibleCenter(a,s,r)&&(i=a[0],this.hasSkipped&&(o=this.haveMultiplyConfirmedCenters()))}var u=this.selectBestPatterns();return e.orderBestPatterns(u),new function(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2],this.__defineGetter__("BottomLeft",function(){return this.bottomLeft}),this.__defineGetter__("TopLeft",function(){return this.topLeft}),this.__defineGetter__("TopRight",function(){return this.topRight})}(u)}}var E={checkAndNudgePoints:function(e,t,n){for(var r=e.width,i=e.height,o=!0,a=0;a<n.length&&o;a+=2){var s=Math.floor(n[a]),h=Math.floor(n[a+1]);if(s<-1||s>r||h<-1||h>i)throw"Error.checkAndNudgePoints ";o=!1,-1==s?(n[a]=0,o=!0):s==r&&(n[a]=r-1,o=!0),-1==h?(n[a+1]=0,o=!0):h==i&&(n[a+1]=i-1,o=!0)}o=!0;for(a=n.length-2;a>=0&&o;a-=2){s=Math.floor(n[a]),h=Math.floor(n[a+1]);if(s<-1||s>r||h<-1||h>i)throw"Error.checkAndNudgePoints ";o=!1,-1==s?(n[a]=0,o=!0):s==r&&(n[a]=r-1,o=!0),-1==h?(n[a+1]=0,o=!0):h==i&&(n[a+1]=i-1,o=!0)}},sampleGrid3:function(e,t,n,r){for(var i=new m(n),o=new Array(n<<1),a=0;a<n;a++){for(var s=o.length,h=a+.5,w=0;w<s;w+=2)o[w]=.5+(w>>1),o[w+1]=h;r.transformPoints1(o),E.checkAndNudgePoints(e,t,o);try{for(w=0;w<s;w+=2){t[Math.floor(o[w])+e.width*Math.floor(o[w+1])]&&i.set_Renamed(w>>1,a)}}catch(e){throw"Error.checkAndNudgePoints"}}return i},sampleGridx:function(e,t,n,r,i,o,a,s,h,w,f,u,d,l,c,g,v,m,b){var y=x.quadrilateralToQuadrilateral(r,i,o,a,s,h,w,f,u,d,l,c,g,v,m,b);return E.sampleGrid3(e,t,n,y)}},D=E;function x(e,t,n,r,i,o,a,s,h){this.a11=e,this.a12=r,this.a13=a,this.a21=t,this.a22=i,this.a23=s,this.a31=n,this.a32=o,this.a33=h,this.transformPoints1=function(e){for(var t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,h=this.a31,w=this.a32,f=this.a33,u=0;u<t;u+=2){var d=e[u],l=e[u+1],c=i*d+s*l+f;e[u]=(n*d+o*l+h)/c,e[u+1]=(r*d+a*l+w)/c}},this.transformPoints2=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r],o=t[r],a=this.a13*i+this.a23*o+this.a33;e[r]=(this.a11*i+this.a21*o+this.a31)/a,t[r]=(this.a12*i+this.a22*o+this.a32)/a}},this.buildAdjoint=function(){return new x(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(e){return new x(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}function F(e,t){this.image=t,this.resultPointCallback=null,this.sizeOfBlackWhiteBlackRun=function(t,n,r,i){var o=Math.abs(i-n)>Math.abs(r-t);if(o){var a=t;t=n,n=a,a=r,r=i,i=a}for(var s=Math.abs(r-t),h=Math.abs(i-n),w=-s>>1,f=n<i?1:-1,u=t<r?1:-1,d=0,l=t,c=n;l!=r;l+=u){var g=o?c:l,v=o?l:c;if(1==d?this.image[g+v*e.width]&&d++:this.image[g+v*e.width]||d++,3==d){var m=l-t,b=c-n;return Math.sqrt(m*m+b*b)}if((w+=h)>0){if(c==i)break;c+=f,w-=s}}var y=r-t,C=i-n;return Math.sqrt(y*y+C*C)},this.sizeOfBlackWhiteBlackRunBothWays=function(t,n,r,i){var o=this.sizeOfBlackWhiteBlackRun(t,n,r,i),a=1,s=t-(r-t);s<0?(a=t/(t-s),s=0):s>=e.width&&(a=(e.width-1-t)/(s-t),s=e.width-1);var h=Math.floor(n-(i-n)*a);return a=1,h<0?(a=n/(n-h),h=0):h>=e.height&&(a=(e.height-1-n)/(h-n),h=e.height-1),s=Math.floor(t+(s-t)*a),(o+=this.sizeOfBlackWhiteBlackRun(t,n,s,h))-1},this.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.X),Math.floor(e.Y),Math.floor(t.X),Math.floor(t.Y)),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.X),Math.floor(t.Y),Math.floor(e.X),Math.floor(e.Y));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},this.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},this.distance=function(e,t){var n=e.X-t.X,r=e.Y-t.Y;return Math.sqrt(n*n+r*r)},this.computeDimension=function(e,t,n,r){var i=7+(Math.round(this.distance(e,t)/r)+Math.round(this.distance(e,n)/r)>>1);switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw"Error"}return i},this.findAlignmentInRegion=function(t,n,r,i){var o=Math.floor(i*t),a=Math.max(0,n-o),s=Math.min(e.width-1,n+o);if(s-a<3*t)throw"Error";var h=Math.max(0,r-o),w=Math.min(e.height-1,r+o);return new function(e,t,n,r,i,o,a,s){this.image=t,this.possibleCenters=new Array,this.startX=n,this.startY=r,this.width=i,this.height=o,this.moduleSize=a,this.crossCheckStateCount=new Array(0,0,0),this.resultPointCallback=s,this.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},this.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0},this.crossCheckVertical=function(e,t,n,r,i){var o=this.image,a=e.height,s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var h=t;h>=0&&o[n+h*e.width]&&s[1]<=r;)s[1]++,h--;if(h<0||s[1]>r)return NaN;for(;h>=0&&!o[n+h*e.width]&&s[0]<=r;)s[0]++,h--;if(s[0]>r)return NaN;for(h=t+1;h<a&&o[n+h*e.width]&&s[1]<=r;)s[1]++,h++;if(h==a||s[1]>r)return NaN;for(;h<a&&!o[n+h*e.width]&&s[2]<=r;)s[2]++,h++;if(s[2]>r)return NaN;var w=s[0]+s[1]+s[2];return 5*Math.abs(w-i)>=2*i?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,h):NaN},this.handlePossibleCenter=function(e,t,n){var r=e[0]+e[1]+e[2],i=this.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(i),2*e[1],r);if(!isNaN(o)){for(var a=(e[0]+e[1]+e[2])/3,s=this.possibleCenters.length,h=0;h<s;h++)if(this.possibleCenters[h].aboutEquals(a,o,i))return new M(i,o,a);var w=new M(i,o,a);this.possibleCenters.push(w),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(w)}return null},this.find=function(e){for(var n=this.startX,o=this.height,a=n+i,s=r+(o>>1),h=new Array(0,0,0),w=0;w<o;w++){var f=s+(0==(1&w)?w+1>>1:-(w+1>>1));h[0]=0,h[1]=0,h[2]=0;for(var u=n;u<a&&!t[u+e.width*f];)u++;for(var d=0;u<a;){if(t[u+f*e.width])if(1==d)h[d]++;else if(2==d){var l;if(this.foundPatternCross(h)&&null!=(l=this.handlePossibleCenter(h,f,u)))return l;h[0]=h[2],h[1]=1,h[2]=0,d=1}else h[++d]++;else 1==d&&d++,h[d]++;u++}if(this.foundPatternCross(h)&&null!=(l=this.handlePossibleCenter(h,f,a)))return l}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"}}(e,this.image,a,h,s-a,w-h,t,this.resultPointCallback).find()},this.createTransform=function(e,t,n,r,i){var o,a,s,h,w=i-3.5;return null!=r?(o=r.X,a=r.Y,s=h=w-3):(o=t.X-e.X+n.X,a=t.Y-e.Y+n.Y,s=h=w),x.quadrilateralToQuadrilateral(3.5,3.5,w,3.5,s,h,3.5,w,e.X,e.Y,t.X,t.Y,o,a,n.X,n.Y)},this.sampleGrid=function(t,n,r){return D.sampleGrid3(e,t,r,n)},this.processFinderPatternInfo=function(e){var t=e.TopLeft,n=e.TopRight,r=e.BottomLeft,i=this.calculateModuleSize(t,n,r);if(i<1)throw"Error";var o=this.computeDimension(t,n,r,i),a=C.getProvisionalVersionForDimension(o),s=a.DimensionForVersion-7,h=null;if(a.AlignmentPatternCenters.length>0)for(var w=n.X-t.X+r.X,f=n.Y-t.Y+r.Y,u=1-3/s,d=Math.floor(t.X+u*(w-t.X)),l=Math.floor(t.Y+u*(f-t.Y)),c=4;c<=16;c<<=1){h=this.findAlignmentInRegion(i,d,l,c);break}var g=this.createTransform(t,n,r,h,o);return new function(e,t){this.bits=e,this.points=t}(this.sampleGrid(this.image,g,o),null==h?new Array(r,t,n):new Array(r,t,n,h))},this.detect=function(){var t=new N(e).findFinderPattern(this.image);return this.processFinderPatternInfo(t)}}x.quadrilateralToQuadrilateral=function(e,t,n,r,i,o,a,s,h,w,f,u,d,l,c,g){var v=this.quadrilateralToSquare(e,t,n,r,i,o,a,s);return this.squareToQuadrilateral(h,w,f,u,d,l,c,g).times(v)},x.squareToQuadrilateral=function(e,t,n,r,i,o,a,s){var h=s-o,w=t-r+o-s;if(0==h&&0==w)return new x(n-e,i-n,e,r-t,o-r,t,0,0,1);var f=n-i,u=a-i,d=e-n+i-a,l=r-o,c=f*h-u*l,g=(d*h-u*w)/c,v=(f*w-d*l)/c;return new x(n-e+g*n,a-e+v*a,e,r-t+g*r,s-t+v*s,t,g,v,1)},x.quadrilateralToSquare=function(e,t,n,r,i,o,a,s){return this.squareToQuadrilateral(e,t,n,r,i,o,a,s).buildAdjoint()};var I=function(){var e=this;e.imagedata=null,e.width=0,e.height=0,e.qrCodeSymbol=null,e.debug=!1,e.maxImgSize=1048576,e.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],e.callback=null,e.orderBestPatterns=function(e){function t(e,t){var n=e.X-t.X,r=e.Y-t.Y;return Math.sqrt(n*n+r*r)}var n,r,i,o=t(e[0],e[1]),a=t(e[1],e[2]),s=t(e[0],e[2]);if(a>=o&&a>=s?(r=e[0],n=e[1],i=e[2]):s>=a&&s>=o?(r=e[1],n=e[0],i=e[2]):(r=e[2],n=e[0],i=e[1]),function(e,t,n){var r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}(n,r,i)<0){var h=n;n=i,i=h}e[0]=n,e[1]=r,e[2]=i},e.vidSuccess=function(t){e.localstream=t,e.webkit?e.video.src=window.webkitURL.createObjectURL(t):e.moz?(e.video.mozSrcObject=t,e.video.play()):e.video.src=t,e.gUM=!0,e.canvas_qr2=document.createElement("canvas"),e.canvas_qr2.id="qr-canvas",e.qrcontext2=e.canvas_qr2.getContext("2d"),e.canvas_qr2.width=e.video.videoWidth,e.canvas_qr2.height=e.video.videoHeight,setTimeout(e.captureToCanvas,500)},e.vidError=function(t){e.gUM=!1},e.captureToCanvas=function(){if(e.gUM)try{if(0==e.video.videoWidth)return void setTimeout(e.captureToCanvas,500);e.canvas_qr2.width=e.video.videoWidth,e.canvas_qr2.height=e.video.videoHeight,e.qrcontext2.drawImage(e.video,0,0);try{e.decode()}catch(t){console.log(t),setTimeout(e.captureToCanvas,500)}}catch(t){console.log(t),setTimeout(e.captureToCanvas,500)}},e.setWebcam=function(t){var n=navigator;e.video=document.getElementById(t);var r=!0;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{navigator.mediaDevices.enumerateDevices().then(function(e){e.forEach(function(e){console.log("deb1"),"videoinput"===e.kind&&e.label.toLowerCase().search("back")>-1&&(r=[{sourceId:e.deviceId}]),console.log(e.kind+": "+e.label+" id = "+e.deviceId)})})}catch(e){console.log(e)}else console.log("no navigator.mediaDevices.enumerateDevices");n.getUserMedia?n.getUserMedia({video:r,audio:!1},e.vidSuccess,e.vidError):n.webkitGetUserMedia?(e.webkit=!0,n.webkitGetUserMedia({video:r,audio:!1},e.vidSuccess,e.vidError)):n.mozGetUserMedia&&(e.moz=!0,n.mozGetUserMedia({video:r,audio:!1},e.vidSuccess,e.vidError))},e.decode=function(t){if(0==arguments.length){if(e.canvas_qr2)var n=e.canvas_qr2,r=e.qrcontext2;else r=(n=document.getElementById("qr-canvas")).getContext("2d");return e.width=n.width,e.height=n.height,e.imagedata=r.getImageData(0,0,e.width,e.height),e.result=e.process(r),null!=e.callback&&e.callback(e.result),e.result}var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var t=document.getElementById("out-canvas");if(null!=t){var n=t.getContext("2d");n.clearRect(0,0,320,240),n.drawImage(i,0,0,320,240)}var r=document.createElement("canvas"),o=r.getContext("2d"),a=i.height,s=i.width;if(i.width*i.height>e.maxImgSize){var h=i.width/i.height;s=h*(a=Math.sqrt(e.maxImgSize/h))}r.width=s,r.height=a,o.drawImage(i,0,0,r.width,r.height),e.width=r.width,e.height=r.height;try{e.imagedata=o.getImageData(0,0,r.width,r.height)}catch(t){return e.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",void(null!=e.callback&&e.callback(e.result))}try{e.result=e.process(o)}catch(t){console.log(t),e.result="error decoding QR Code"}null!=e.callback&&e.callback(e.result)},i.onerror=function(){null!=e.callback&&e.callback("Failed to load the image")},i.src=t},e.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},e.decode_url=function(e){var t="";try{t=escape(e)}catch(n){console.log(n),t=e}var n="";try{n=decodeURIComponent(t)}catch(e){console.log(e),n=t}return n},e.decode_utf8=function(t){return e.isUrl(t)?e.decode_url(t):t},e.process=function(t){var n=(new Date).getTime(),r=e.grayScaleToBitmap(e.grayscale());if(e.debug){for(var i=0;i<e.height;i++)for(var o=0;o<e.width;o++){var a=4*o+i*e.width*4;e.imagedata.data[a]=(r[o+i*e.width],0),e.imagedata.data[a+1]=(r[o+i*e.width],0),e.imagedata.data[a+2]=r[o+i*e.width]?255:0}t.putImageData(e.imagedata,0,0)}var s=new F(this,r).detect();if(e.debug){for(i=0;i<s.bits.Height;i++)for(o=0;o<s.bits.Width;o++){a=4*o*2+2*i*e.width*4;e.imagedata.data[a]=(s.bits.get_Renamed(o,i),0),e.imagedata.data[a+1]=(s.bits.get_Renamed(o,i),0),e.imagedata.data[a+2]=s.bits.get_Renamed(o,i)?255:0}t.putImageData(e.imagedata,0,0)}for(var h=A.decode(this,s.bits).DataByte,w="",f=0;f<h.length;f++)for(var u=0;u<h[f].length;u++)w+=String.fromCharCode(h[f][u]);var d=(new Date).getTime()-n;return console.log(d),e.decode_utf8(w)},e.getPixel=function(t,n){if(e.width<t)throw"point error";if(e.height<n)throw"point error";var r=4*t+n*e.width*4;return(33*e.imagedata.data[r]+34*e.imagedata.data[r+1]+33*e.imagedata.data[r+2])/100},e.binarize=function(t){for(var n=new Array(e.width*e.height),r=0;r<e.height;r++)for(var i=0;i<e.width;i++){var o=e.getPixel(i,r);n[i+r*e.width]=o<=t}return n},e.getMiddleBrightnessPerArea=function(t){for(var n=Math.floor(e.width/4),r=Math.floor(e.height/4),i=new Array(4),o=0;o<4;o++){i[o]=new Array(4);for(var a=0;a<4;a++)i[o][a]=new Array(0,0)}for(var s=0;s<4;s++)for(var h=0;h<4;h++){i[h][s][0]=255;for(var w=0;w<r;w++)for(var f=0;f<n;f++){var u=t[n*h+f+(r*s+w)*e.width];u<i[h][s][0]&&(i[h][s][0]=u),u>i[h][s][1]&&(i[h][s][1]=u)}}for(var d=new Array(4),l=0;l<4;l++)d[l]=new Array(4);for(s=0;s<4;s++)for(h=0;h<4;h++)d[h][s]=Math.floor((i[h][s][0]+i[h][s][1])/2);return d},e.grayScaleToBitmap=function(t){for(var n=e.getMiddleBrightnessPerArea(t),r=n.length,i=Math.floor(e.width/r),o=Math.floor(e.height/r),a=new ArrayBuffer(e.width*e.height),s=new Uint8Array(a),h=0;h<r;h++)for(var w=0;w<r;w++)for(var f=0;f<o;f++)for(var u=0;u<i;u++)s[i*w+u+(o*h+f)*e.width]=t[i*w+u+(o*h+f)*e.width]<n[w][h];return s},e.grayscale=function(){for(var t=new ArrayBuffer(e.width*e.height),n=new Uint8Array(t),r=0;r<e.height;r++)for(var i=0;i<e.width;i++){var o=e.getPixel(i,r);n[i+r*e.width]=o}return n}};window.QRCodeDecoder=I;t.default=I}]);